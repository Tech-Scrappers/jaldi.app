import{R as I,U as B,Q as q,r as g,A,c as n,a,b as t,w as i,t as o,u as s,n as p,Y as f,F as $,h as D,a9 as z,ai as P,a2 as j,a3 as M,a4 as O,a5 as Q,aj as W,o as c,_ as b,f as w,e as k,I as R,g as x,i as Y,a0 as G,a1 as H}from"./index-iXE1tgq1.js";const J={class:"flex items-center mt-8 intro-y"},K={class:"mr-auto text-lg font-semibold"},X={class:"grid grid-cols-12 gap-6 mt-5"},Z={class:"col-span-12 intro-y lg:col-span-12"},ee={class:"intro-y box p-8"},ae={class:"grid grid-cols-12 gap-6"},te={class:"col-span-12"},se={class:"flex items-center"},oe={key:0,class:"mt-2 text-xs text-red-600"},re={key:1,class:"text-red-500 text-sm mt-2"},le={class:"col-span-12"},ce={class:"flex items-center mb-4"},ne={class:"border p-2 rounded-md min-h-[50px] w-[70%]"},ie={class:"m-3 font-semibold"},ue={class:"flex items-center mb-2"},de={key:0,class:"mt-2 text-xs text-red-600"},me={key:0,class:"text-red-500 text-sm mt-2"},_e={class:"col-span-12"},ve={class:"ml-4 mr-4"},ge={class:"font-medium"},ye={class:"mt-1 text-slate-500"},be={__name:"create",setup(he){const m=I(new z),{t:V}=B(),S=q().getUserId,N=P(),y=g(!1),_=g(""),r=g({name:"",sub_category:""}),l=g({user_id:S,name:"",sub_category:[]}),U=()=>{_.value.trim()!==""&&(l.value.sub_category.push({name:_.value.trim()}),_.value="",r.value.sub_category="")},F=e=>{l.value.sub_category.splice(e,1)},L=()=>{let e=!0;return l.value.name.trim()?r.value.name="":(r.value.name=V("category.categoryNameRequired"),e=!1),l.value.sub_category.length===0?(r.value.sub_category=V("category.addSubcategoryRequired"),e=!1):r.value.sub_category="",e},T=async()=>{if(L())try{y.value=!0;const e=await j.category.create(l.value,{headers:{"Content-Type":"multipart/form-data"}});if(M(e).success){y.value=!1,l.value={user_id:S,name:"",sub_category:[]};const h=document.querySelectorAll("#success-notification-content")[0].cloneNode(!0);h.classList.remove("hidden"),O({node:h,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast(),N.push("/inventory/categories")}}catch(e){Q(e),m.setErrors(e.errors),y.value=!1}},u=g("en");return A(()=>{u.value=localStorage.getItem("locale")||"en"}),(e,v)=>{const h=W("RouterLink");return c(),n($,null,[a("div",J,[t(h,{to:"/inventory/categories"},{default:i(()=>[t(s(b),{variant:"primary",size:"sm",class:"shadow-md mr-4 h-8 w-9"},{default:i(()=>[t(s(w),{icon:"ChevronLeft",class:p([{"rotate-180":u.value==="ar","":u.value!=="ar"},"w-5 h-5"])},null,8,["class"])]),_:1})]),_:1}),a("h2",K,o(e.$t("category.addNewCategory")),1)]),a("div",X,[a("div",Z,[a("div",ee,[a("div",ae,[a("div",te,[t(s(R),null,{default:i(()=>[k(o(e.$t("category.category")),1)]),_:1}),a("div",se,[t(s(x),{modelValue:l.value.name,"onUpdate:modelValue":v[0]||(v[0]=d=>l.value.name=d),id:"category",type:"text",class:p([{"border-red-500":m.invalid("name")},"w-[60%]"]),placeholder:e.$t("category.category")},null,8,["modelValue","class","placeholder"])]),m.invalid("name")?(c(),n("div",oe,o(m.getError("name")),1)):f("",!0),r.value.name?(c(),n("p",re,o(r.value.name),1)):f("",!0)]),a("div",le,[t(s(R),null,{default:i(()=>[k(o(e.$t("category.subCategory")),1)]),_:1}),a("div",ce,[t(s(x),{modelValue:_.value,"onUpdate:modelValue":v[1]||(v[1]=d=>_.value=d),id:"sub-category",class:"w-[60%]",type:"text",placeholder:e.$t("category.subCategory")},null,8,["modelValue","placeholder"]),t(s(b),{variant:"primary",class:p([{"mr-4 ":u.value==="ar","ml-4 ":u.value!=="ar"},"shadow-md w-28 flex items-center pl-2 pr-4"]),onClick:U},{default:i(()=>[t(s(w),{icon:"Plus",class:"w-5 h-5 mr-2"}),a("span",null,o(e.$t("category.add")),1)]),_:1},8,["class"])]),a("div",ne,[a("h3",ie,o(e.$t("category.subCategories")),1),(c(!0),n($,null,D(l.value.sub_category,(d,C)=>(c(),n("div",{key:C,class:""},[a("div",ue,[t(s(x),{modelValue:d.name,"onUpdate:modelValue":E=>d.name=E,type:"text",class:"mr-4 w-[87%]",placeholder:e.$t("category.enterSubcategory")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(s(b),{variant:"danger",class:p([{"mr-4":u.value==="ar","":u.value!=="ar"},"shadow-md flex items-center"]),onClick:E=>F(C)},{default:i(()=>[t(s(w),{icon:"Trash",class:"w-5 h-5"})]),_:2},1032,["class","onClick"])]),m.invalid(`sub_category.${C}.name`)?(c(),n("div",de,o(e.$t("category.TheSubCategory")),1)):f("",!0)]))),128))]),r.value.sub_category?(c(),n("p",me,o(r.value.sub_category),1)):f("",!0)]),a("div",_e,[t(s(b),{variant:"primary",class:"mr-2 shadow-md w-28",onClick:T},{default:i(()=>[y.value?(c(),Y(s(G),{key:0,icon:"three-dots",class:"w-8 h-6 text-white"})):(c(),n($,{key:1},[k(o(e.$t("category.submit")),1)],64))]),_:1})])])])])]),t(s(H),{id:"success-notification-content",class:"flex hidden"},{default:i(()=>[t(s(w),{icon:"CheckCircle",class:"text-success"}),a("div",ve,[a("div",ge,o(e.$t("category.categoryCreatedSuccess")),1),a("div",ye,o(e.$t("category.checkCategoryListing")),1)])]),_:1})],64)}}};export{be as default};
