import{O as E,Q as M,r as s,aB as S,ae as O,A as T,c as r,a as o,n as F,b as i,u as c,t as d,F as D,h as B,w as P,ab as V,a3 as j,a5 as z,aj as U,o as n,f as C,aC as J,aD as L,e as W,_ as Y}from"./index-iXE1tgq1.js";const H={class:"px-6 max-w-7xl mx-auto"},Q={class:"p-5 box h-full"},q={class:"flex flex-col md:flex-row md:items-center justify-between"},G={class:"text-lg font-semibold text-gray-800"},K={class:"tabs bg-[#F8F8FF] rounded-lg"},X=["onClick"],Z={key:0,class:"animate-pulse bg-slate-200 w-full h-56 rounded-lg"},ee={key:0},ae={key:1,class:"text-center"},te=["src"],se={class:"text-xl font-semibold text-gray-400 pt-5"},oe={class:"text-base text-gray-400 font-normal pb-4"},le={__name:"DailyMonthlySalesReport",setup(re){const $=M().getUserId,I=s(localStorage.getItem("locale")||"en"),A=["day","month"],_=s("day"),y=s(null),m=s(!1),p=s("1 Jan, 2025 - 31 Jan, 2025"),v=s(""),x=s(""),f=s([]),g=s([]),N={autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},u=s({chart:{id:"chart",toolbar:{show:!1},height:450,type:"line",fontFamily:"Public Sans, sans-serif",zoom:{enabled:!1}},stroke:{width:3,curve:"straight"},colors:["#F96F01","#b2b2b2"],grid:{padding:{top:30,bottom:30,left:30,right:30},borderColor:"#f4f4f4",yaxis:{lines:{show:!0}}},xaxis:{categories:f.value,labels:{style:{colors:Array(12).fill("#989898")}},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{tickAmount:3,labels:{style:{fontFamily:"Public Sans, sans-serif",fontSize:"13px",fontWeight:400,colors:["#989898"]},formatter:e=>S(e.toFixed(1))}},tooltip:{y:{formatter:e=>S(e.toFixed(1))}}}),b=e=>{const a=new Date(e);if(isNaN(a.getTime()))throw new Error("Invalid date format");return a.toISOString().split("T")[0]};O(p,e=>{try{if(e){const[a,t]=e.split(" - ");v.value=b(a.trim()),x.value=b(t.trim()),h()}}catch(a){console.error("Error converting date:",a.message)}});const R=e=>{e!=null&&e.line_chart_data&&(f.value=e.line_chart_data.map(a=>a.period),g.value=[{name:"Total Sales",data:e.line_chart_data.map(a=>parseFloat(a.total_sales))}],u.value={...u.value,xaxis:{...u.value.xaxis,categories:f.value}})},h=async(e="day")=>{try{m.value=!0;const a=await V.get("https://pos.jaldi.app/api/v1/reporting/sales",{params:{user_id:$,start_date:v.value,end_date:x.value,interval:e==="day"?"daily":"monthly"}}),t=j(a);t.success?(y.value=t.data,R(t.data),_.value=e):console.error("API Response Error:",t.message)}catch(a){const t=z(a);console.error("API Error:",t.message)}finally{m.value=!1}};return T(()=>{h("day")}),(e,a)=>{var w,k;const t=U("apexchart");return n(),r("div",H,[o("div",null,[o("div",{class:F(["relative mt-3 mb-6 ml-auto sm:mt-0 text-slate-500",{"mr-2":I.value==="ar"}])},[i(c(C),{icon:"Calendar",class:"absolute inset-y-0 left-0 z-10 w-4 h-4 my-auto ml-3"}),i(c(J),{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=l=>p.value=l),options:N,class:"pl-10 w-60 shadow-md"},null,8,["modelValue"])],2),o("div",Q,[o("div",q,[o("h4",G,d(e.$t("reporting.DailyMonthlySalesReport")),1),o("div",K,[(n(),r(D,null,B(A,l=>o("button",{key:l,class:F({"active-tab":_.value===l}),onClick:ie=>h(l)},d(e.$t(`dashboard.tabs.${l}`)),11,X)),64))])]),m.value?(n(),r("div",Z)):(n(),r(D,{key:1},[((k=(w=y.value)==null?void 0:w.line_chart_data)==null?void 0:k.length)>0?(n(),r("div",ee,[i(t,{id:"chart",width:"100%",height:"450",type:"line",options:u.value,series:g.value},null,8,["options","series"])])):(n(),r("div",ae,[o("img",{src:c(L),class:"w-[160px] mx-auto"},null,8,te),o("h3",se,d(e.$t("dashboard.noDataAvailable")),1),o("p",oe,d(e.$t("dashboard.noDataDescription")),1),i(c(Y),{variant:"outline-secondary",class:"flex items-center hov-end hover:text-gray-700 justify-center mx-auto w-40 py-2",onClick:h},{default:P(()=>[i(c(C),{icon:"RefreshCcwIcon",class:"w-4 h-4 text-gray-700 mr-2"}),W(" "+d(e.$t("dashboard.refreshNow")),1)]),_:1})]))],64))])])])}}},de=E(le,[["__scopeId","data-v-a0861f65"]]);export{de as default};
