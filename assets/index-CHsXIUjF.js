import{Q as re,R,a9 as I,r as y,ae as oe,af as se,A as le,o as u,c as m,a as s,t as l,b as r,w as d,e as v,u as o,I as C,F as j,h as q,n as f,J as A,f as z,_,Y as h,D as x,g as J,a2 as w,a3 as S,a5 as D}from"./index-iXE1tgq1.js";const ne={class:"grid grid-cols-12 gap-6 mt-5"},de={class:"col-span-12 intro-y lg:col-span-12"},ce={class:"intro-y box p-8"},ie={class:"grid grid-cols-12 gap-6"},ue={class:"col-span-12"},me={class:"mr-auto text-lg font-medium -mb-1"},ye={class:"col-span-6"},ve={class:"flex items-center flex-row-reverse"},fe=["value"],ge={key:0,class:"mt-2 text-xs text-red-600"},pe={class:"col-span-6"},_e={class:"flex items-center flex-row-reverse"},be=["value"],Ce={key:0,class:"mt-2 text-xs text-red-600"},he={class:"col-span-6"},xe={class:"flex items-center flex-row-reverse"},we=["value"],Se={key:0,class:"mt-2 text-xs text-red-600"},De={class:"p-5"},ke={class:"text-xl text-black my-4 font-medium text-center"},$e={class:"pt-2"},Be={key:0,class:"mt-2 text-xs text-red-600"},Fe={class:"p-5"},Ve={class:"text-xl text-black my-4 font-medium text-center"},Ee={class:"pt-2"},Pe={key:0,class:"mt-2 text-xs text-red-600"},Ne={class:"p-5"},Oe={class:"text-xl text-black my-4 font-medium text-center"},Le={class:"pt-2"},Ue={key:0,class:"mt-2 text-xs text-red-600"},Ie={__name:"index",props:{createFormData:{type:Object,required:!0},isProductBankData:{type:Object,required:!1},form:{type:Object,required:!0}},setup(p){const M=re().getUserId,n=p,B=R(new I),F=R(new I),V=R(new I);y(!1);const E=y(),P=y([]),N=y(),b=y(""),k=y(""),$=y(""),G=async()=>{try{const e=await w.product.categoryList(),a=S(e);a.success&&(E.value=a.data.data)}catch(e){D(e)}},H=async()=>{try{const e={name:b.value,user_id:M},a=await w.product.categoryCreate(e),t=S(a);t.success&&(O.value=!1,n.createFormData.category_id=t.data.data.id,E.value.push(t.data.data),b.value="")}catch(e){D(e),B.setErrors(e.errors)}},K=async()=>{try{const e=await w.product.subCategoryList(n.createFormData.category_id),a=S(e);a.success&&(P.value=a.data.data)}catch(e){D(e)}},W=async()=>{try{const e={name:k.value},a=await w.product.subCategoryCreate(n.createFormData.category_id,e),t=S(a);t.success&&(L.value=!1,n.createFormData.SubCategorySelect=t.data.data.id,P.value.push(t.data.data),k.value="")}catch(e){D(e),F.setErrors(e.errors)}},X=async()=>{try{const e=await w.product.brandsList(),a=S(e);a.success&&(N.value=a.data.data)}catch(e){D(e)}},Z=async()=>{try{const e={name:$.value,user_id:M},a=await w.product.brandsCreate(e),t=S(a);t.success&&(n.createFormData.brand_id=t.data.data.id,N.value.push(t.data.data),U.value=!1,$.value="")}catch(e){D(e),V.setErrors(e.errors)}};oe(()=>n.createFormData.category_id,e=>{e&&K()}),y(!1),se(async()=>{var e,a,t;if(n.isProductBankData&&!n.createFormData.category_id){if((e=n.isProductBankData.category)!=null&&e.name){const c=E.value.find(g=>(g==null?void 0:g.name)===n.isProductBankData.category.name);n.createFormData.category_id=c?c.id:"",b.value=c?c.name:""}if(n.createFormData.category_id&&((a=n.isProductBankData.subcategory)!=null&&a.name)){const c=P.value.find(g=>(g==null?void 0:g.name)===n.isProductBankData.subcategory.name);n.createFormData.SubCategorySelect=c?c.id:"",k.value=c?c.name:""}if((t=n.isProductBankData.brand)!=null&&t.name){const c=N.value.find(g=>(g==null?void 0:g.name)===n.isProductBankData.brand.name);n.createFormData.brand_id=c?c.id:"",$.value=c?c.name:""}}});const i=y("en");le(()=>{i.value=localStorage.getItem("locale")||"en",G(),X()});const O=y(!1),L=y(!1),U=y(!1),ee=()=>{O.value=!0},Q=()=>{O.value=!1,b.value=""},ae=()=>{L.value=!0},T=()=>{L.value=!1},te=()=>{U.value=!0},Y=()=>{U.value=!1};return(e,a)=>(u(),m(j,null,[s("div",ne,[s("div",de,[s("div",ce,[s("div",ie,[s("div",ue,[s("h3",me,l(e.$t("category.productClassification")),1)]),s("div",ye,[r(o(C),{for:"category_id"},{default:d(()=>[v(l(e.$t("category.category"))+" ",1),a[6]||(a[6]=s("span",{class:"text-danger"}," *",-1))]),_:1}),s("div",ve,[r(o(A),{modelValue:n.createFormData.category_id,"onUpdate:modelValue":a[0]||(a[0]=t=>n.createFormData.category_id=t),options:{placeholder:e.$t("category.selectCategory")},class:f(["w-full",{"border-red-500":p.form.invalid("category_id")}]),id:"category_id"},{default:d(()=>[a[7]||(a[7]=s("option",null,null,-1)),(u(!0),m(j,null,q(E.value,t=>(u(),m("option",{value:t.id},l(t.name),9,fe))),256))]),_:1},8,["modelValue","options","class"]),r(o(_),{variant:"primary",class:f(["shadow-md",{"mr-3":i.value==="ar","ml-3 ":i.value!=="ar"}]),onClick:ee},{default:d(()=>[r(o(z),{icon:"Plus",class:"w-5 h-5"})]),_:1},8,["class"])]),p.form.invalid("category_id")?(u(),m("div",ge,l(p.form.getError("category_id")),1)):h("",!0)]),s("div",pe,[r(o(C),{for:"SubCategorySelect"},{default:d(()=>[v(l(e.$t("category.subCategory"))+" ",1),a[8]||(a[8]=s("span",{class:"text-danger"}," *",-1))]),_:1}),s("div",_e,[r(o(A),{modelValue:n.createFormData.SubCategorySelect,"onUpdate:modelValue":a[1]||(a[1]=t=>n.createFormData.SubCategorySelect=t),options:{placeholder:e.$t("category.selectSubCategory")},id:"SubCategorySelect",class:f(["w-full",{"border-red-500":p.form.invalid("sub_category_id")}])},{default:d(()=>[(u(!0),m(j,null,q(P.value,t=>(u(),m("option",{key:t.id,value:t.id},l(t.name),9,be))),128))]),_:1},8,["modelValue","options","class"]),r(o(_),{variant:"primary",class:f([{"mr-3":i.value==="ar","ml-3 ":i.value!=="ar"},"shadow-md"]),onClick:ae},{default:d(()=>[r(o(z),{icon:"Plus",class:"w-5 h-5"})]),_:1},8,["class"])]),p.form.invalid("sub_category_id")?(u(),m("div",Ce,l(p.form.getError("sub_category_id")),1)):h("",!0)]),s("div",he,[r(o(C),{for:"brand_id"},{default:d(()=>[v(l(e.$t("category.brand"))+" ",1),a[9]||(a[9]=s("span",{class:"text-danger"}," *",-1))]),_:1}),s("div",xe,[r(o(A),{modelValue:n.createFormData.brand_id,"onUpdate:modelValue":a[2]||(a[2]=t=>n.createFormData.brand_id=t),options:{placeholder:e.$t("category.selectBrand")},class:f(["w-full",{"border-red-500":p.form.invalid("brand_id")}]),id:"brand_id"},{default:d(()=>[a[10]||(a[10]=s("option",null,null,-1)),(u(!0),m(j,null,q(N.value,t=>(u(),m("option",{value:t.id},l(t.name),9,we))),256))]),_:1},8,["modelValue","options","class"]),r(o(_),{variant:"primary",class:f([{"mr-3":i.value==="ar","ml-3 ":i.value!=="ar"},"shadow-md"]),onClick:te},{default:d(()=>[r(o(z),{icon:"Plus",class:"w-5 h-5"})]),_:1},8,["class"])]),p.form.invalid("brand_id")?(u(),m("div",Se,l(p.form.getError("brand_id")),1)):h("",!0)])])])])]),r(o(x),{open:O.value,onClose:Q},{default:d(()=>[r(o(x).Panel,null,{default:d(()=>[s("div",De,[s("div",ke,l(e.$t("category.addNewCategory")),1),s("div",$e,[r(o(C),{htmlFor:"vertical-form-1"},{default:d(()=>[v(l(e.$t("category.category")),1)]),_:1}),r(o(J),{modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=t=>b.value=t),type:"text",placeholder:e.$t("category.category"),class:f({"border-red-500":B.invalid("name")})},null,8,["modelValue","placeholder","class"]),B.invalid("name")?(u(),m("div",Be,l(B.getError("name")),1)):h("",!0)])]),s("div",{class:f(["px-5 pt-6 pb-8 flex items-center justify-center text-center gap-4",{"flex-row-reverse":i.value==="ar","":i.value!=="ar"}])},[r(o(_),{variant:"outline-secondary",type:"button",onClick:Q,class:"w-24"},{default:d(()=>[v(l(e.$t("category.cancel")),1)]),_:1}),r(o(_),{variant:"primary",type:"button",onClick:H,ref:"deleteButtonRef"},{default:d(()=>[v(l(e.$t("category.addCategory")),1)]),_:1},512)],2)]),_:1})]),_:1},8,["open"]),r(o(x),{open:U.value,onClose:Y},{default:d(()=>[r(o(x).Panel,null,{default:d(()=>[s("div",Fe,[s("div",Ve,l(e.$t("category.addNewBrand")),1),s("div",Ee,[r(o(C),{htmlFor:"vertical-form-1"},{default:d(()=>[v(l(e.$t("category.brand")),1)]),_:1}),r(o(J),{modelValue:$.value,"onUpdate:modelValue":a[4]||(a[4]=t=>$.value=t),type:"text",placeholder:e.$t("category.brand"),class:f({"border-red-500":V.invalid("name")})},null,8,["modelValue","placeholder","class"]),V.invalid("name")?(u(),m("div",Pe,l(V.getError("name")),1)):h("",!0)])]),s("div",{class:f(["px-5 pt-6 pb-8 flex items-center justify-center text-center gap-4",{"flex-row-reverse":i.value==="ar","":i.value!=="ar"}])},[r(o(_),{variant:"outline-secondary",type:"button",onClick:Y,class:"w-24"},{default:d(()=>[v(l(e.$t("category.cancel")),1)]),_:1}),r(o(_),{variant:"primary",type:"button",onClick:Z,ref:"deleteButtonRef"},{default:d(()=>[v(l(e.$t("category.addBrand")),1)]),_:1},512)],2)]),_:1})]),_:1},8,["open"]),r(o(x),{open:L.value,onClose:T},{default:d(()=>[r(o(x).Panel,null,{default:d(()=>[s("div",Ne,[s("div",Oe,l(e.$t("category.addNewSubCategory")),1),s("div",Le,[r(o(C),{htmlFor:"vertical-form-1"},{default:d(()=>[v(l(e.$t("category.subCategory")),1)]),_:1}),r(o(J),{modelValue:k.value,"onUpdate:modelValue":a[5]||(a[5]=t=>k.value=t),type:"text",placeholder:e.$t("category.subCategory"),class:f({"border-red-500":F.invalid("name")})},null,8,["modelValue","placeholder","class"]),F.invalid("name")?(u(),m("div",Ue,l(F.getError("name")),1)):h("",!0)])]),s("div",{class:f(["px-5 pt-6 pb-8 flex items-center justify-center text-center gap-4",{"flex-row-reverse":i.value==="ar","":i.value!=="ar"}])},[r(o(_),{variant:"outline-secondary",type:"button",onClick:T,class:"w-24"},{default:d(()=>[v(l(e.$t("category.cancel")),1)]),_:1}),r(o(_),{variant:"primary",type:"button",onClick:W,ref:"deleteButtonRef"},{default:d(()=>[v(l(e.$t("category.addSubCategory")),1)]),_:1},512)],2)]),_:1})]),_:1},8,["open"])],64))}};export{Ie as _};
