import{d as R,Q as V,r as c,R as E,U as N,A as U,V as z,c as I,a,t as _,u as s,i as j,w as n,Y as x,n as h,B as T,ak as M,b as l,F,W as J,o as v,e as b,_ as S,Z as f,f as A,$ as L}from"./index-Do1w1vvF.js";const Q={class:"mt-10 text-lg font-semibold intro-y"},W={class:"grid grid-cols-12 gap-6 mt-5 intro-y box p-8"},Y={class:"col-span-12 flex justify-between intro-y"},Z={class:"relative w-56 text-slate-500 mr-3"},q=["placeholder"],G={class:"flex gap-2.5"},P=R({__name:"list",setup(H){const $=V().getUserId,d=c(!0),e=E({page:1,limit:10,search:"",sort:"-count_date",sort_direction:"desc",paginate:!0,column_filters:[]}),g=c(null),k=c(0),{t:i}=N(),C=c([{field:"count_name",title:i("stock-adjustment.adjustmentName"),width:"350px"},{field:"count_date",title:i("stock-adjustment.date"),width:"200px"},{field:"notes",title:i("stock-adjustment.notes"),cellClass:"line-clamp-3 break-words overflow-hidden max-h-[4.5rem]"},{field:"actions",title:i("stock-adjustment.actions"),sort:!1}]);let u,w;const B=()=>{clearTimeout(w),w=setTimeout(()=>{m()},300)},m=async()=>{try{u&&u.abort(),u=new AbortController;const t=u.signal;d.value=!0;const r=(await J.get("https://inventory.jaldi.app/api/stock-adjustments",{params:{...e,user_id:$,signal:t}})).data;g.value=r.data,k.value=r.meta.total}catch(t){console.error("Error fetching  Adjustments:",t)}finally{d.value=!1}},D=t=>{e.page=t.current_page,e.limit=t.pagesize,e.sort=t.sort_direction==="desc"?`-${t.sort_column}`:`${t.sort_column}`,e.sort_direction=t.sort_direction,e.search=t.search,t.change_type==="search"?B():m()},o=c("en");U(()=>{o.value=localStorage.getItem("locale")||"en",m()});const y=z();return(t,p)=>(v(),I(F,null,[a("h2",Q,_(t.$t("stock-adjustment.stockAdjustments")),1),a("div",W,[a("div",Y,[a("div",null,[s(y).can("create","stockAdjustment")?(v(),j(s(f),{key:0,to:"/inventory/stock-adjustment/create"},{default:n(()=>[l(s(S),{variant:"primary",class:"mr-2 shadow-md"},{default:n(()=>[b(_(t.$t("stock-adjustment.addStockAdjustment")),1)]),_:1})]),_:1})):x("",!0)]),a("div",{class:h(["flex items-center mt-3 sm:mt-0",{"mr-auto":o.value==="ar","ml-auto":o.value!=="ar"}])},[a("div",Z,[T(a("input",{"onUpdate:modelValue":p[0]||(p[0]=r=>e.search=r),type:"text",class:"w-56 pr-10 box",placeholder:t.$t("stock-adjustment.search")},null,8,q),[[M,e.search]])]),l(s(f),{to:"/inventory/stock-adjustment/import"},{default:n(()=>[l(s(S),{variant:"outline-primary",class:"flex items-center"},{default:n(()=>[l(s(A),{icon:"Download",class:h(["hidden w-4 h-4 sm:block",{"ml-3":o.value==="ar","mr-2":o.value!=="ar"}])},null,8,["class"]),b(" "+_(t.$t("product.importExcelButton")),1)]),_:1})]),_:1})],2)]),a("div",{class:h(["col-span-12",{"ar-all-stock-ajustment all-data-table-ar":o.value==="ar","":o.value!=="ar"}])},[l(s(L),{rows:g.value,columns:C.value,loading:d.value,totalRows:k.value,isServerMode:!0,pageSize:e.limit,sortable:!0,sort:e.sort,sortDirection:e.sort_direction,search:e.search,onChange:D},{actions:n(r=>[a("div",G,[s(y).can("list","stockAdjustment")?(v(),j(s(f),{key:0,to:`/inventory/stock-adjustment/${r.value.id}`,class:"bg-[#96837f33] p-2 rounded-md cursor-pointer"},{default:n(()=>[l(s(A),{icon:"Eye",class:"w-4 h-4 text-gray-600"})]),_:2},1032,["to"])):x("",!0)])]),_:1},8,["rows","columns","loading","totalRows","pageSize","sort","sortDirection","search"])],2)])],64))}});export{P as default};
