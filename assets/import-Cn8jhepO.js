import{_ as N}from"./Dropzone.vue_vue_type_script_setup_true_lang-icQa-NwA.js";import{d as U,Q as V,R as A,r as l,A as I,a4 as L,c as d,a as t,b as n,w as a,u as s,F as v,h as w,Y as M,a9 as $,x,o as u,_ as b,e as R,Z as T,f as _,t as j,D as z,a1 as O,aa as W}from"./index-Do1w1vvF.js";import"./dropzone-DWIWGpu4.js";const q={class:"grid grid-cols-12 gap-6 mt-5"},J={class:"col-span-12 intro-y lg:col-span-12"},K={class:"w-full flex justify-between intro-y px-5"},P={class:"p-5 bg-white shadow-md rounded-lg w-[800px] mx-auto mt-2 upload-detail"},Q={class:"flex justify-center py-8"},X={key:0,class:"mt-4 pl-4"},Y={class:"p-5 text-center"},Z={class:"px-5 pb-8 text-center"},oe=U({__name:"import",setup(G){const S=V().getUserId;A(new $);const g=l(),F=l(),C=l(),c=l(!1),y=l(!1),h=l(null),D=()=>{c.value=!1},B=()=>{y.value=!1,c.value=!1,W.push("/inventory/products")};x("bind[dropzoneSingleRef]",o=>{g.value=o}),x("bind[dropzoneMultipleRef]",o=>{F.value=o}),x("bind[dropzoneValidationRef]",o=>{C.value=o});const k=S;I(()=>{const o=g.value;o&&(o.dropzone.options.init=function(){this.on("sending",function(e,p,i){i.append("user_id",k)})},o.dropzone.on("success",()=>{c.value=!0}),o.dropzone.on("error",()=>{y.value=!0;const e=document.querySelectorAll("#failed-notification-content")[0].cloneNode(!0);e.classList.remove("hidden"),L({node:e,duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}))});const E=localStorage.getItem("token")||"",f=l("");return(o,e)=>(u(),d(v,null,[t("div",q,[t("div",J,[e[3]||(e[3]=t("div",{class:"flex flex-col items-center p-5 border-b sm:flex-row border-slate-200/60 dark:border-darkmode-400"},[t("h2",{class:"mr-auto text-base font-semibold"},"Import File")],-1)),t("div",K,[t("div",null,[n(s(T),{to:"/inventory/products"},{default:a(()=>[n(s(b),{variant:"primary",class:"mr-2 shadow-md"},{default:a(()=>e[0]||(e[0]=[R(" Back ")])),_:1})]),_:1})])]),t("div",P,[n(s(N),{refKey:"dropzoneSingleRef",options:{url:"https://inventory.jaldi.app/api/import-products",thumbnailWidth:150,maxFilesize:.5,maxFiles:1,addRemoveLinks:!0,acceptedFiles:".xls,.xlsx",headers:{Authorization:`Bearer ${s(E)}`},init(){this.on("sending",(p,i,r)=>{r.append("user_id",s(k))}),this.on("error",(p,i,r)=>{if(r){const m=JSON.parse(r.responseText);f.value=m.errors}else console.error(i)})}},class:"dropzone"},{default:a(()=>[t("div",Q,[n(s(_),{icon:"Upload",class:"w-10 h-10"})]),e[1]||(e[1]=t("div",{class:"text-lg font-medium"}," Drop files here or click to upload. ",-1)),e[2]||(e[2]=t("div",{class:"text-gray-600"}," Selected files ",-1))]),_:1},8,["options"]),f.value?(u(),d("div",X,[(u(!0),d(v,null,w(f.value,(p,i)=>(u(),d("ul",{class:"list-disc text-sm mb-0.5 text-red-600",key:i},[(u(!0),d(v,null,w(p,(r,m)=>(u(),d("li",{key:m},j(r),1))),128))]))),128))])):M("",!0)])])]),n(s(z),{open:c.value,onClose:D,initialFocus:h.value},{default:a(()=>[n(s(z).Panel,null,{default:a(()=>[t("div",Y,[n(s(_),{icon:"BadgeCheck",class:"w-16 h-16 mx-auto mt-3 text-green-500"}),e[4]||(e[4]=t("div",{class:"mt-5 text-3xl"},"File Update successful",-1)),e[5]||(e[5]=t("div",{class:"mt-2 text-slate-500"}," Effortlessly upload and manage your files. ",-1))]),t("div",Z,[n(s(b),{variant:"success",type:"button",class:"w-24 ml-4 text-white",ref_key:"deleteButtonRef",ref:h,onClick:B},{default:a(()=>e[6]||(e[6]=[R(" ok ")])),_:1},512)])]),_:1})]),_:1},8,["open","initialFocus"]),n(s(O),{id:"failed-notification-content",class:"flex hidden"},{default:a(()=>[n(s(_),{icon:"XCircle",class:"text-danger"}),e[7]||(e[7]=t("div",{class:"ml-4 mr-4"},[t("div",{class:"font-medium"},"No more files please!"),t("div",{class:"mt-1 text-slate-500"},"Already Upload data.")],-1))]),_:1})],64))}});export{oe as default};
