import{d as k,Q as z,r as n,ae as b,A as F,aj as N,o as i,c as d,a as s,t as p,n as R,b as l,u as r,f as $,aC as A,aD as M,w as j,e as E,_ as V,ab as B,a3 as O,a5 as U}from"./index-iXE1tgq1.js";const W={class:"p-5 intro-y box h-full"},Y={class:"mb-6 flex justify-between items-center w-full"},q={class:"text-lg font-semibold text-gray-800"},J={key:0},L={key:1},P={key:2,class:"h-full"},T=["src"],Q={class:"text-xl font-semibold text-gray-400 pt-5 text-center"},X={class:"text-base text-gray-400 font-normal pb-4 text-center"},G=k({__name:"index",props:{start_date:{type:String,required:!0},end_date:{type:String,required:!0}},setup(S){const x=z().getUserId,y=n(),u=n([0,0]),I=["Discount Percentage","Invoice Count"],h=n(!1),_=async()=>{var t,e;try{h.value=!0;const a=await B.get(`https://pos.jaldi.app/api/v1/reporting/discounts?user_id=${x}&start_date=${c.value}&end_date=${f.value}`),o=O(a);o.success&&(y.value=o.data,u.value=[((t=o.data)==null?void 0:t.widget.discount_percentage)??0,((e=o.data)==null?void 0:e.widget.invoice_count)??0],console.log("series.value",u.value))}catch(a){U(a)}finally{h.value=!1}},g=n("1 Jan, 2025 - 31 Jan, 2025"),c=n(""),f=n(""),w=t=>{const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date: ${t}`);const a=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${a}-${o}-${m}`};b(g,t=>{try{if(t){const[e,a]=t.split(" - ");c.value=w(e.trim()),f.value=w(a.trim()),console.log("start_date:",c.value),console.log("end_date:",f.value)}}catch(e){console.error("Error converting date:",e.message)}});const v=n("en");b([()=>c.value,()=>f.value],()=>{_()}),F(()=>{v.value=localStorage.getItem("locale")||"en",_()});const C={chart:{toolbar:{show:!0},height:450,type:"pie",fontFamily:"Inter, sans-serif",zoom:{enabled:!1}},series:u,labels:I,dataLabels:{enabled:!1,style:{fontFamily:"Inter, sans-serif",fontSize:"12px",colors:["#fff"]}},plotOptions:{pie:{donut:{size:"0%"}}},tooltip:{enabled:!0,marker:{show:!1}},legend:{show:!0,position:"left",fontFamily:"Inter, sans-serif",fontSize:"14px",fontWeight:400,markers:{width:8,height:8,radius:12,offsetX:-5},itemMargin:{horizontal:15,vertical:5},formatter:function(t,e){return t+"  "+e.w.globals.series[e.seriesIndex]}},colors:["#8176f9","#4A3AFF"],subtitle:{align:"left",style:{fontSize:"14px",fontWeight:"normal",fontFamily:"Inter, sans-serif",color:"#666"}}};return(t,e)=>{var o;const a=N("apexchart");return i(),d("div",W,[s("div",Y,[s("h4",q,p(t.$t("reporting.DiscountsReport")),1),s("div",{class:R(["relative mt-3 sm:mt-0 text-slate-500 flex items-center",{" mr-auto":v.value==="ar","ml-auto":v.value!=="ar"}])},[l(r($),{icon:"Calendar",class:"absolute inset-y-0 left-0 z-10 w-4 h-4 my-auto ml-3"}),l(r(A),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=m=>g.value=m),options:{autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}},class:"pl-10 w-60 shadow-md"},null,8,["modelValue"])],2)]),h.value?(i(),d("div",J,e[2]||(e[2]=[s("div",{class:"flex items-center justify-between w-full"},[s("div",null,[s("div",{class:"animate-pulse bg-slate-200 w-56 h-3 rounded-full mb-4"}),s("div",{class:"animate-pulse bg-slate-200 w-56 h-3 rounded-full mb-4"})]),s("div",{class:"animate-pulse bg-slate-200 w-60 h-60 rounded-full mx-auto"})],-1)]))):(o=y.value)!=null&&o.widget?(i(),d("div",L,[l(a,{width:"100%",height:"450",type:"pie",options:C,series:u.value},null,8,["series"])])):(i(),d("div",P,[s("div",null,[s("img",{src:r(M),class:"w-[160px] mx-auto"},null,8,T),s("h3",Q,p(t.$t("dashboard.noDataAvailable")),1),s("p",X,p(t.$t("dashboard.noDataDescription")),1),l(r(V),{variant:"outline-secondary",class:"flex items-center justify-center mx-auto w-36",onClick:e[1]||(e[1]=m=>_())},{default:j(()=>[l(r($),{icon:"RefreshCcwIcon",class:"w-4 h-4 text-gray-700 mr-2"}),E(" "+p(t.$t("dashboard.refreshNow")),1)]),_:1})])]))])}}}),H={class:"px-6 max-w-7xl mx-auto"},Z={__name:"DiscountsReport",setup(S){return(D,x)=>(i(),d("div",H,[l(G,{"full-height":!1,start_date:null,end_date:null})]))}};export{Z as default};
